(this["webpackJsonptrtris-game"]=this["webpackJsonptrtris-game"]||[]).push([[0],{14:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(4),i=n.n(a),u=(n(14),n(5)),o=n(2),s=n(3),b="PAUSE",j="RESUME",l="MOVE_LEFT",O="MOVE_RIGHT",d="ROTATE",f="MOVE_DOWN",h="GAME_OVER",g="RESTART",v=function(){return{type:f}},m=n(9),p=function(){for(var e=[],t=0;t<18;t++){e.push([]);for(var n=0;n<10;n++)e[t].push(0)}return e},x=[[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],[[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]]],[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]]],[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]]],R=function(){return e=1,t=x.length-1,Math.floor(Math.random()*(t-e+1))+e;var e,t},N=function(){return{grid:p(),shape:R(),rotation:0,x:5,y:-4,nextShape:R(),isRunning:!0,score:0,speed:1e3,gameOver:!1}},y=function(e,t){return(t+1)%x[e].length},E=function(e,t,n,r,c){for(var a=x[e][c],i=0;i<a.length;i++)for(var u=0;u<a[i].length;u++)if(0!==a[i][u]){var o=u+n,s=i+r;if(s<0)continue;var b=t[s];if(!b)return!1;if(void 0===b[o]||0!==b[o])return!1}return!0},A=function(e,t,n,r,c){for(var a=!1,i=x[e][c],u=Object(m.a)(t),o=0;o<i.length;o++)for(var s=0;s<i[o].length;s++){if(i[o][s])o+r<0?a=!0:u[o+r][s+n]=e}return{grid:u,gameOver:a}},k=function(e){for(var t=0,n=0;n<e.length;n++)-1===e[n].indexOf(0)&&(t+=1,e.splice(n,1),e.unshift(Array(10).fill(0)));return[0,40,100,300,1200][t]},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N(),t=arguments.length>1?arguments[1]:void 0,n=e.shape,r=e.grid,c=e.x,a=e.y,i=e.rotation,u=e.nextShape,o=e.score,v=e.isRunning;switch(t.type){case d:var m=y(n,i);return E(n,r,c,a,m)?Object(s.a)(Object(s.a)({},e),{},{rotation:m}):e;case O:return E(n,r,c+1,a,i)?Object(s.a)(Object(s.a)({},e),{},{x:c+1}):e;case l:return E(n,r,c-1,a,i)?Object(s.a)(Object(s.a)({},e),{},{x:c-1}):e;case f:var p=a+1;if(E(n,r,c,p,i))return Object(s.a)(Object(s.a)({},e),{},{y:p});var x=A(n,r,c,a,i),R=x.grid,C=x.gameOver;if(C){var S=Object(s.a)({},e);return S.shape=0,S.grid=R,Object(s.a)(Object(s.a)({},e),{},{gameOver:!0})}var T=N();return T.grid=R,T.shape=u,T.score=o,T.isRunning=v,T.score=o+k(R),T;case j:return Object(s.a)(Object(s.a)({},e),{},{isRunning:!0});case b:return Object(s.a)(Object(s.a)({},e),{},{isRunning:!1});case h:return e;case g:return N();default:return e}},S=Object(u.a)({game:C}),T=(n(19),n(1));function F(e){var t="grid-square color-".concat(e.color);return Object(T.jsx)("div",{className:t})}function M(e){var t=Object(r.useRef)(),n=Object(r.useRef)(0),c=Object(r.useRef)(0),a=Object(o.b)(),i=Object(o.c)((function(e){return e.game})),u=i.grid,s=i.shape,b=i.rotation,j=i.x,l=i.y,O=i.isRunning,d=i.speed,f=x[s][b],h=s,g=u.map((function(e,t){return e.map((function(e,n){var r=n-j,c=t-l,a=e;r>=0&&r<f.length&&c>=0&&c<f.length&&(a=0===f[c][r]?a:h);var i=t*u[0].length+n;return Object(T.jsx)(F,{color:a},i)}))})),m=function e(r){if(t.current=requestAnimationFrame(e),O){n.current||(n.current=r);var i=r-n.current;c.current+=i,c.current>d&&(a(v()),c.current=0),n.current=r}};return Object(r.useEffect)((function(){return t.current=requestAnimationFrame(m),function(){return cancelAnimationFrame(t.current)}}),[O]),Object(T.jsx)("div",{className:"grid-board",children:g})}function P(e){var t=Object(o.c)((function(e){return e.game.nextShape})),n=x[t][0].map((function(e,t){return e.map((function(e,n){return Object(T.jsx)(F,{color:e},"".concat(t).concat(n))}))}));return Object(T.jsx)("div",{className:"next-block",children:n})}function L(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.game})),r=n.score,c=n.isRunning,a=n.gameOver;return Object(T.jsxs)("div",{className:"score-board",children:[Object(T.jsxs)("div",{children:["Score:",r]}),Object(T.jsx)("div",{children:"Level: 1"}),Object(T.jsx)("button",{className:"score-board-button",onClick:function(e){a||t(c?{type:b}:{type:j})},children:c?"Pause":"Play"}),Object(T.jsx)("button",{className:"score-board-button",onClick:function(e){t({type:g})},children:"Restart"})]})}function w(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.game.isRunning})),r=Object(o.c)((function(e){return e.game.gameOver}));return Object(T.jsxs)("div",{className:"controls",children:[Object(T.jsx)("button",{disabled:!n||r,className:"control-button",onClick:function(e){n&&!r&&t({type:l})},children:"Left"}),Object(T.jsx)("button",{disabled:!n||r,className:"control-button",onClick:function(e){n&&!r&&t({type:O})},children:"Right"}),Object(T.jsx)("button",{disabled:!n||r,className:"control-button",onClick:function(e){n&&!r&&t({type:d})},children:"Rotate"}),Object(T.jsx)("button",{disabled:!n||r,className:"control-button",onClick:function(e){n&&!r&&t(v())},children:"Down"})]})}function V(e){var t=Object(o.c)((function(e){return e.game.isRunning})),n="",r="hidden";return Object(o.c)((function(e){return e.game.gameOver}))?(n="Game Over",r=""):t||(n="Paused",r=""),Object(T.jsx)("div",{className:"message-popup ".concat(r),children:Object(T.jsx)("h1",{children:n})})}var _=Object(u.b)(S);var q=function(){return Object(T.jsx)(o.a,{store:_,children:Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)("header",{className:"App-header",children:Object(T.jsx)("h1",{className:"App-title",children:"Tetris Redux"})}),Object(T.jsx)(M,{}),Object(T.jsx)(P,{}),Object(T.jsx)(L,{}),Object(T.jsx)(w,{}),Object(T.jsx)(V,{})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(q,{})}),document.getElementById("root")),D()}},[[21,1,2]]]);
//# sourceMappingURL=main.f22bf5a3.chunk.js.map